<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <title>Aggiungi Challenge</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_admin.css') }}">
</head>
<body>

    <h1>Inserisci Nuova Challenge</h1>

    <div class="form-wrapper">
        <div class="form-box">
            <!-- enctype multipart per upload file -->
            <form action="{{ url_for('submit_challenge') }}" method="POST" enctype="multipart/form-data">
                <div class="form-grid">
                    <div class="form-field">
                        <label for="title">Titolo</label>
                        <input type="text" id="title" name="title" required>
                    </div>

                    <div class="form-field">
                        <label for="description">Descrizione</label>
                        <textarea id="description" name="description" required></textarea>
                    </div>

                    <div class="form-field">
                        <label for="flag">Flag</label>
                        <input type="text" id="flag" name="flag" required>
                    </div>

                    <div class="form-field">
                        <label for="category">Categoria</label>
                        <select id="category" name="category" required>
                            <option value="Cripto">Cripto</option>
                            <option value="Misc">Misc</option>
                            <option value="Web">Web</option>
                        </select>
                    </div>

                    <div class="form-field">
                        <label for="points">Punti</label>
                        <input type="number" id="points" name="points" min="1" required>
                    </div>

                    <div class="form-field">
                        <label for="hint1">Hint 1</label>
                        <input type="text" id="hint1" name="hint1">
                    </div>

                    <div class="form-field">
                        <label for="hint2">Hint 2</label>
                        <input type="text" id="hint2" name="hint2">
                    </div>

                    <!-- Allegati -->
                    <div class="form-field">
                        <label for="attached_file">Allegato 1 (file o link)</label>
                        <input type="file" id="attached_file" name="attached_file">
                        <input type="url" name="attached_file_link" placeholder="oppure inserisci un link">
                    </div>

                    <div class="form-field">
                        <label for="attached_file2">Allegato 2 (file o link)</label>
                        <input type="file" id="attached_file2" name="attached_file2">
                        <input type="url" name="attached_file2_link" placeholder="oppure inserisci un link">
                    </div>

                    <div class="form-field">
                        <label for="attached_file3">Allegato 3 (file o link)</label>
                        <input type="file" id="attached_file3" name="attached_file3">
                        <input type="url" name="attached_file3_link" placeholder="oppure inserisci un link">
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit">Salva Challenge</button>
                </div>
            </form>

            <a class="back-link" href="{{ url_for('admin_dashboard') }}">‚Üê Torna alla dashboard admin</a>
        </div>
    </div>

    <!-- Tabella challenge esistenti -->
    <div class="table-container">
        <div class="group">
            <h2>Challenge esistenti</h2>
            <table>
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Titolo</th>
                        <th>Categoria</th>
                        <th>Punti</th>
                        <th>Azioni</th>
                    </tr>
                </thead>
                <tbody>
                    {% for challenge in challenges %}
                        <tr>
                            <td>{{ challenge.id }}</td>
                            <td>{{ challenge.title }}</td>
                            <td>{{ challenge.category }}</td>
                            <td>{{ challenge.points }}</td>
                            <td>
                                <form action="{{ url_for('delete_challenge', challenge_id=challenge.id) }}" method="POST" onsubmit="return confirm('Vuoi davvero eliminare questa challenge?');">
                                    <button type="submit" class="delete-btn">üóë Elimina</button>
                                </form>
                            </td>
                        </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>

</body>
</html>
