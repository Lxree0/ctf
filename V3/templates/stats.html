<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Statistiche Utente</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='css/style_dashboard.css') }}">
</head>
<body>

  <!-- Navbar -->
  <nav class="navbar">
    <div class="nav-container">
      <a href="{{ url_for('dashboard') }}" class="nav-logo">CyberTrials</a>
      <div class="nav-right">
        <span class="nav-username">üë§ {{ username }}</span>
        <a href="{{ url_for('logout') }}" class="nav-logout">Logout</a>
        <a href="{{url_for('dashboard')}}" class="nav-logout"> Home</a>
      </div>
    </div>
  </nav>

  <!-- Contenitore statistiche -->
  <div class="dashboard-container">
    <h1 class="page-title">Statistiche Utente</h1>

    <div class="ctf-box" style="max-width:600px; margin:0 auto;">
      <h2>üë§ {{ username }}</h2>
      <p><strong>Punteggio Totale:</strong> {{ score }}</p>
      <p><strong>Challenge Completate:</strong> {{ completed_count }}</p>
      <p><strong>Challenge Rimaste:</strong> {{ remaining_count }}</p>
    </div>

    <!-- Tabella dettagliata -->
    <div class="ctf-box" style="max-width:800px; margin:30px auto;">
      <h2>Dettagli Challenge</h2>
      <table style="width:100%; border-collapse: collapse; color: var(--color-text-light);">
        <thead>
          <tr style="border-bottom: 2px solid var(--color-accent-cyan);">
            <th style="padding:10px; text-align:left;">Titolo</th>
            <th style="padding:10px; text-align:center;">Categoria</th>
            <th style="padding:10px; text-align:center;">Stato</th>
          </tr>
        </thead>
        <tbody>
          {% for challenge in challenges %}
          <tr style="border-bottom: 1px solid rgba(255,255,255,0.2);">
            <td style="padding:10px;">{{ challenge.title }}</td>
            <td style="padding:10px; text-align:center;">{{ challenge.category }}</td>
            <td style="padding:10px; text-align:center;">
              {% if challenge.id in completed %}
                <span style="color:var(--color-accent-green);">Completata ‚úÖ</span>
              {% else %}
                <span style="color:var(--color-locked);">Non completata ‚ùå</span>
              {% endif %}
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  </div>

  <!-- Footer -->
  <footer class="login-footer">
    <p>¬© 2025 CyberSecurity Dashboard ‚Äî All Rights Reserved</p>
    <p>Platform created By Lorenzo Lega and Simone Giove</p>
    <div class="footer-links">
      <a href="{{ url_for('PlatformCred') }}">Platform & Challs Credits</a>
      <a href="{{ url_for('about') }}">About Us</a>
      <a href="{{ url_for('contact') }}">Contact</a>
    </div>
  </footer>

</body>
</html>
