<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style_admin.css') }}">
</head>
<body>

    <h1>Admin Dashboard</h1>
    
    <div class="table-container">
        {% for group in groups [1:] %}
            <div class="group">
                <h2>Gruppo: {{ group.group_name }}</h2>
                <table>
                    <thead>
                        <tr>
                            <th>CTF</th>
                            <th>Completata</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for challenge in group.challenges %}
                            <tr>
                                <td>{{ challenge.title }}</td>
                                <td data-status="{{ 'Si' if challenge.completed == 'Si' else 'No' }}">
                                    {{ 'Si' if challenge.completed == 'Si' else 'No' }}
                                </td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </div>
        {% endfor %}
    </div>

    <div class="add-challenge-button">
        <a href="{{ url_for('add_challenge') }}">
            <button>Aggiungi Nuova Challenge</button>
        </a>
    </div>

    <script>
        // Applica data-status per colorare "Si" e "No"
        document.querySelectorAll('td[data-status]').forEach(td => {
            const status = td.getAttribute('data-status');
            td.classList.add(status === 'Si' ? 'status-si' : 'status-no');
        });
    </script>

</body>
</html>
